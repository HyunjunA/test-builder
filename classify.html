<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="google-adsense-account" content="ca-pub-6316887055096303">
  <meta name="description" content="Free AI-powered Dog vs Cat Classifier. Upload a photo or use your webcam to instantly identify whether an image contains a dog or cat using TensorFlow.js machine learning.">
  <meta name="keywords" content="dog vs cat AI, image classifier, pet identifier, machine learning, TensorFlow.js, webcam AI">
  <meta property="og:title" content="Dog vs Cat AI Classifier - App Collection">
  <meta property="og:description" content="Upload a photo or use your webcam to classify dogs and cats instantly with AI-powered image recognition.">
  <meta property="og:type" content="website">
  <title>Dog vs Cat AI Classifier - App Collection</title>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6316887055096303"
     crossorigin="anonymous"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="/style.css" rel="stylesheet">
  <style>
    .ai-header h1 { font-size: 2rem; }
    .tab-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
    }
    .tab-btn {
      padding: 10px 24px;
      border-radius: 50px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      border: 2px solid var(--input-border);
      background: var(--input-bg);
      color: var(--text-primary);
      box-shadow: none;
      transition: all 0.3s ease;
    }
    .tab-btn:hover { transform: translateY(-2px); }
    .tab-btn.active {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      border-color: transparent;
      box-shadow: 0 6px 20px rgba(102,126,234,0.4);
    }
    .tab-panel { display: none; }
    .tab-panel.active { display: block; }

    /* Upload styles */
    .upload-area {
      margin: 25px auto;
      max-width: 400px;
      border: 3px dashed var(--input-border);
      border-radius: 16px;
      padding: 40px 20px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .upload-area:hover, .upload-area.dragover {
      border-color: #667eea;
      background: rgba(102,126,234,0.05);
    }
    .upload-area p { color: var(--text-secondary); font-size: 1rem; margin-top: 10px; }
    .upload-area .upload-icon { font-size: 3rem; }
    .upload-area input[type="file"] { display: none; }

    /* Webcam styles */
    #webcam-container {
      margin: 20px auto;
      max-width: 350px;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(0,0,0,0.15);
    }
    #webcam-container canvas {
      display: block;
      width: 100%;
    }
    #webcam-label-container {
      max-width: 350px;
      margin: 15px auto 0;
    }

    /* Shared result styles */
    #preview-container {
      display: none;
      margin: 20px auto;
      max-width: 350px;
    }
    #preview-container img {
      width: 100%;
      border-radius: 16px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.15);
    }
    #result-area { display: none; margin-top: 25px; }
    #result-emoji { font-size: 5rem; margin-bottom: 5px; }
    #result-text { font-size: 1.4rem; font-weight: 700; color: var(--text-primary); }
    #predictions { max-width: 350px; margin: 20px auto 0; }
    .prediction-bar { margin: 8px 0; text-align: left; }
    .prediction-label { font-weight: 600; font-size: 0.95rem; color: var(--text-primary); margin-bottom: 4px; }
    .bar-bg { background: var(--input-border); border-radius: 10px; height: 28px; overflow: hidden; }
    .bar-fill {
      height: 100%; border-radius: 10px; transition: width 0.5s ease;
      display: flex; align-items: center; padding-left: 10px;
      font-size: 0.8rem; font-weight: 700; color: #fff; min-width: 40px;
    }
    .bar-dog { background: linear-gradient(135deg, #6eb5ff, #2196f3); }
    .bar-cat { background: linear-gradient(135deg, #ff6b6b, #e53935); }
    .retry-btn { margin-top: 20px; }
    .status-msg { color: var(--text-secondary); font-size: 0.9rem; margin-top: 10px; }
    .back-link {
      display: inline-block; margin-top: 25px;
      color: var(--text-secondary); text-decoration: none; font-size: 0.9rem; transition: color 0.3s;
    }
    .back-link:hover { color: #667eea; }
  </style>
</head>
<body class="has-nav">
  <nav class="site-nav">
    <div class="nav-inner">
      <a href="/index.html" class="nav-logo">App Collection</a>
      <div class="nav-links">
        <a href="/lotto.html">Lotto</a>
        <a href="/classify.html">AI Classifier</a>
        <a href="/about.html">About</a>
        <a href="/contact.html">Contact</a>
      </div>
    </div>
  </nav>

  <div class="container">
    <div class="header ai-header">
      <div class="logo">üêæ</div>
      <h1>Dog vs Cat AI</h1>
      <p class="subtitle">Classify with webcam or photo upload</p>
    </div>

    <div class="tab-buttons">
      <button class="tab-btn active" data-tab="webcam">Analyze with Webcam</button>
      <button class="tab-btn" data-tab="upload">Analyze with Upload</button>
    </div>

    <p id="statusMsg" class="status-msg"></p>

    <!-- Webcam Tab -->
    <div class="tab-panel active" id="panel-webcam">
      <button type="button" id="webcamStartBtn">Start Webcam</button>
      <div id="webcam-container"></div>
      <div id="webcam-label-container"></div>
    </div>

    <!-- Upload Tab -->
    <div class="tab-panel" id="panel-upload">
      <div class="upload-area" id="uploadArea">
        <div class="upload-icon">üì∑</div>
        <p>Click or drag and drop a photo</p>
        <input type="file" id="fileInput" accept="image/*">
      </div>

      <div id="preview-container">
        <img id="preview" alt="Uploaded image">
      </div>

      <div id="result-area">
        <div id="result-emoji"></div>
        <div id="result-text"></div>
        <div id="predictions"></div>
        <button class="retry-btn" id="retryBtn" type="button">Analyze Another Photo</button>
      </div>
    </div>

    <div class="content-section">
      <h2>How It Works</h2>
      <p>Our Dog vs Cat AI Classifier uses a machine learning model trained with Google's Teachable Machine and runs on TensorFlow.js. The entire classification process happens in your browser, meaning your photos are never uploaded to any server. Your privacy is fully protected.</p>
      <p><strong>Two ways to classify:</strong></p>
      <ul>
        <li><strong>Webcam Mode:</strong> Grant camera access and get real-time, continuous classification as you point your camera at a dog or cat. Confidence scores update live.</li>
        <li><strong>Upload Mode:</strong> Click or drag-and-drop any image file. The AI will analyze it instantly and show you the result with a confidence percentage.</li>
      </ul>
      <p>The model outputs a confidence score for each category (dog and cat), displayed as visual progress bars so you can see exactly how certain the AI is about its prediction.</p>
    </div>

    <div class="content-section">
      <h2>Tips for Best Results</h2>
      <ul>
        <li>Use clear, well-lit photos for the most accurate classification.</li>
        <li>The AI works best when the animal is the main subject of the image.</li>
        <li>Both close-up portraits and full-body shots are supported.</li>
        <li>For webcam mode, ensure your camera has permission enabled in your browser settings.</li>
      </ul>
    </div>

    <a href="/index.html" class="back-link">&larr; Back to Main</a>

    <footer>
      <p>&copy; 2024 App Collection. All rights reserved.</p>
      <p class="footer-links">
        <a href="/privacy.html">Privacy Policy</a> &middot;
        <a href="/about.html">About</a> &middot;
        <a href="/contact.html">Contact</a>
      </p>
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
  <script>
    const MODEL_URL = "https://teachablemachine.withgoogle.com/models/K8tyDsrgp/";
    let model = null;
    let webcam = null;
    let webcamRunning = false;

    const statusMsg = document.getElementById('statusMsg');

    // Tab switching
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById('panel-' + btn.dataset.tab).classList.add('active');
        // Stop webcam when switching away
        if (btn.dataset.tab !== 'webcam' && webcamRunning) {
          stopWebcam();
        }
      });
    });

    // Load model
    (async function loadModel() {
      statusMsg.textContent = 'Loading AI model...';
      try {
        model = await tmImage.load(MODEL_URL + "model.json", MODEL_URL + "metadata.json");
        statusMsg.textContent = '';
      } catch (e) {
        statusMsg.textContent = 'Failed to load model. Please refresh the page.';
      }
    })();

    // ===== Webcam =====
    const webcamStartBtn = document.getElementById('webcamStartBtn');
    const webcamContainer = document.getElementById('webcam-container');
    const labelContainer = document.getElementById('webcam-label-container');

    webcamStartBtn.addEventListener('click', async () => {
      if (!model) {
        statusMsg.textContent = 'Model is still loading.';
        return;
      }
      if (webcamRunning) {
        stopWebcam();
        return;
      }
      try {
        const flip = true;
        webcam = new tmImage.Webcam(350, 350, flip);
        await webcam.setup();
        await webcam.play();
        webcamRunning = true;
        webcamStartBtn.textContent = 'Stop Webcam';
        webcamContainer.innerHTML = '';
        webcamContainer.appendChild(webcam.canvas);
        labelContainer.innerHTML = '';
        for (let i = 0; i < model.getTotalClasses(); i++) {
          const div = document.createElement('div');
          div.className = 'prediction-bar';
          labelContainer.appendChild(div);
        }
        window.requestAnimationFrame(webcamLoop);
      } catch (err) {
        statusMsg.textContent = 'Cannot access webcam. Please check browser permissions.';
      }
    });

    async function webcamLoop() {
      if (!webcamRunning) return;
      webcam.update();
      await webcamPredict();
      window.requestAnimationFrame(webcamLoop);
    }

    async function webcamPredict() {
      const prediction = await model.predict(webcam.canvas);
      for (let i = 0; i < prediction.length; i++) {
        const p = prediction[i];
        const pct = Math.round(p.probability * 100);
        const name = p.className;
        const lower = name.toLowerCase();
        const barClass = (lower.includes('dog')) ? 'bar-dog' : 'bar-cat';
        labelContainer.children[i].innerHTML =
          '<div class="prediction-label">' + name + '  ' + pct + '%</div>' +
          '<div class="bar-bg"><div class="bar-fill ' + barClass + '" style="width:' + pct + '%">' + pct + '%</div></div>';
      }
    }

    function stopWebcam() {
      webcamRunning = false;
      if (webcam) {
        webcam.stop();
        webcam = null;
      }
      webcamContainer.innerHTML = '';
      labelContainer.innerHTML = '';
      webcamStartBtn.textContent = 'Start Webcam';
    }

    // ===== Upload =====
    const uploadArea = document.getElementById('uploadArea');
    const fileInput = document.getElementById('fileInput');
    const preview = document.getElementById('preview');
    const previewContainer = document.getElementById('preview-container');
    const resultArea = document.getElementById('result-area');
    const retryBtn = document.getElementById('retryBtn');

    uploadArea.addEventListener('click', () => fileInput.click());
    fileInput.addEventListener('change', (e) => {
      if (e.target.files.length > 0) handleFile(e.target.files[0]);
    });

    uploadArea.addEventListener('dragover', (e) => { e.preventDefault(); uploadArea.classList.add('dragover'); });
    uploadArea.addEventListener('dragleave', () => { uploadArea.classList.remove('dragover'); });
    uploadArea.addEventListener('drop', (e) => {
      e.preventDefault();
      uploadArea.classList.remove('dragover');
      if (e.dataTransfer.files.length > 0) handleFile(e.dataTransfer.files[0]);
    });

    retryBtn.addEventListener('click', () => {
      previewContainer.style.display = 'none';
      resultArea.style.display = 'none';
      uploadArea.style.display = '';
      fileInput.value = '';
      document.getElementById('predictions').innerHTML = '';
    });

    async function handleFile(file) {
      if (!file.type.startsWith('image/')) {
        statusMsg.textContent = 'Only image files can be uploaded.';
        return;
      }
      const reader = new FileReader();
      reader.onload = async (e) => {
        preview.src = e.target.result;
        previewContainer.style.display = 'block';
        uploadArea.style.display = 'none';
        if (!model) {
          statusMsg.textContent = 'Model is still loading.';
          return;
        }
        statusMsg.textContent = 'Analyzing...';
        preview.onload = async () => {
          try {
            const prediction = await model.predict(preview);
            showResults(prediction);
            statusMsg.textContent = '';
          } catch (err) {
            statusMsg.textContent = 'Analysis failed. Please try again.';
          }
        };
      };
      reader.readAsDataURL(file);
    }

    function showResults(prediction) {
      resultArea.style.display = 'block';
      const container = document.getElementById('predictions');
      container.innerHTML = '';
      let best = { className: '', probability: 0 };

      for (let i = 0; i < prediction.length; i++) {
        const p = prediction[i];
        const pct = Math.round(p.probability * 100);
        const name = p.className;
        const lower = name.toLowerCase();
        const barClass = (lower.includes('dog')) ? 'bar-dog' : 'bar-cat';
        const bar = document.createElement('div');
        bar.className = 'prediction-bar';
        bar.innerHTML =
          '<div class="prediction-label">' + name + '  ' + pct + '%</div>' +
          '<div class="bar-bg"><div class="bar-fill ' + barClass + '" style="width:' + pct + '%">' + pct + '%</div></div>';
        container.appendChild(bar);
        if (p.probability > best.probability) best = p;
      }

      const emoji = document.getElementById('result-emoji');
      const text = document.getElementById('result-text');
      const bestLower = best.className.toLowerCase();
      const pct = Math.round(best.probability * 100);

      if (bestLower.includes('dog')) {
        emoji.textContent = 'üê∂';
        text.textContent = 'It\'s a dog! (' + pct + '%)';
      } else if (bestLower.includes('cat')) {
        emoji.textContent = 'üê±';
        text.textContent = 'It\'s a cat! (' + pct + '%)';
      } else {
        emoji.textContent = 'ü§î';
        text.textContent = best.className + ' (' + pct + '%)';
      }
    }
  </script>
</body>
</html>
